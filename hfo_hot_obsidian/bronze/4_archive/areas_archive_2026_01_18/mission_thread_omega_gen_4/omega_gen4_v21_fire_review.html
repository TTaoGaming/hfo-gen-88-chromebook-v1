<!-- Medallion: Bronze | Mutation: 0% | HIVE: I -->
<!-- OMEGA GEN 4 V21 - FIRE EFFECTS REVIEW LAB (V4 - ULTRA STABLE SPRITES) -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HFO OMEGA | FIRE LAB V21 V4</title>
    <style>
        body {
            margin: 0;
            background: #000;
            color: #ffae00;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
        }

        #canvas-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            width: 100vw;
            height: 100vh;
        }

        .lab-quadrant {
            position: relative;
            border: 1px solid #442200;
            overflow: hidden;
            background: #050200;
        }

        .label {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 10;
            background: rgba(30, 10, 0, 0.9);
            padding: 8px;
            border: 1px solid #ffae00;
            font-size: 11px;
            font-weight: bold;
        }

        .tag {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
            padding: 4px 8px;
            background: #ff4500;
            color: #000;
            font-size: 10px;
            font-weight: bold;
            border-radius: 3px;
        }

        .desc {
            position: absolute;
            top: 45px;
            left: 10px;
            z-index: 10;
            font-size: 9px;
            color: #aaa;
            max-width: 15vw;
        }
    </style>
</head>

<body>
    <div id="canvas-container">
        <div class="lab-quadrant" id="q1">
            <div class="label">1. GILDED SHIMMER</div>
            <div class="tag">READY STATE</div>
            <div class="desc">Soft Gold Pulse using Alpha-Sprite Stacks</div>
        </div>
        <div class="lab-quadrant" id="q2">
            <div class="label">2. CRIMSON TURBULENCE</div>
            <div class="tag">COMMIT STATE</div>
            <div class="desc">High-Velocity Particle Manifold (Vulkanic)</div>
        </div>
        <div class="lab-quadrant" id="q3">
            <div class="label">3. PLASMA TONGUES</div>
            <div class="tag">COMMIT STATE</div>
            <div class="desc">Vertical Flicker Stacks (Zero-Shader)</div>
        </div>
        <div class="lab-quadrant" id="q4">
            <div class="label">4. SOLAR CORONA</div>
            <div class="tag">READY STATE</div>
            <div class="desc">Rotating Heat Haze Stacks</div>
        </div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "pixi": "https://cdn.jsdelivr.net/npm/pixi.js@7.3.2/+esm"
        }
    }
    </script>

    <script type="module">
        import * as PIXI from 'pixi';

        // --- HELPER: Create Glow Texture ---
        function createGlowTexture(renderer, size, color) {
            const canvas = document.createElement('canvas');
            canvas.width = size; canvas.height = size;
            const ctx = canvas.getContext('2d');
            const center = size / 2;
            const grad = ctx.createRadialGradient(center, center, 0, center, center, size / 2);

            // Convert hex to rgb
            const r = (color >> 16) & 0xFF;
            const g = (color >> 8) & 0xFF;
            const b = color & 0xFF;

            grad.addColorStop(0, `rgba(${r},${g},${b}, 1)`);
            grad.addColorStop(0.3, `rgba(${r},${g},${b}, 0.5)`);
            grad.addColorStop(1, `rgba(${r},${g},${b}, 0)`);

            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, size, size);

            return PIXI.Texture.from(canvas);
        }

        // --- Q1: GILDED SHIMMER (READY) ---
        async function initQ1() {
            const container = document.getElementById('q1');
            const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
            container.appendChild(app.view);

            const glowTex = createGlowTexture(app.renderer, 100, 0xFFCC00);
            const layers = [];
            for (let i = 0; i < 6; i++) {
                const s = new PIXI.Sprite(glowTex);
                s.anchor.set(0.5);
                s.blendMode = PIXI.BLEND_MODES.ADD;
                app.stage.addChild(s);
                layers.push(s);
            }

            let time = 0;
            app.ticker.add((delta) => {
                time += 0.03 * delta;
                layers.forEach((s, i) => {
                    const phase = time + i * 0.8;
                    s.x = app.screen.width / 2 + Math.sin(phase) * 15;
                    s.y = app.screen.height / 2 + Math.cos(phase * 0.5) * 10;
                    s.scale.set(1.5 + Math.sin(phase * 0.8) * 0.4);
                    s.alpha = 0.2 + Math.sin(phase * 1.5) * 0.1;
                });
            });
        }

        // --- Q2: CRIMSON TURBULENCE (COMMIT) ---
        async function initQ2() {
            const container = document.getElementById('q2');
            const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
            container.appendChild(app.view);

            const emberTex = createGlowTexture(app.renderer, 24, 0xFF4500);
            const burstTex = createGlowTexture(app.renderer, 48, 0xFFFFFF);
            const particles = [];

            app.ticker.add((delta) => {
                if (particles.length < 100) {
                    const isBurst = Math.random() > 0.95;
                    const p = new PIXI.Sprite(isBurst ? burstTex : emberTex);
                    p.anchor.set(0.5);
                    p.x = app.screen.width / 2 + (Math.random() - 0.5) * 20;
                    p.y = app.screen.height / 2 + 80;
                    p.vx = (Math.random() - 0.5) * 5;
                    p.vy = -4 - Math.random() * 10;
                    p.life = 1.0;
                    p.decay = 0.02 + Math.random() * 0.02;
                    p.blendMode = PIXI.BLEND_MODES.ADD;
                    app.stage.addChild(p);
                    particles.push(p);
                }

                for (let i = particles.length - 1; i >= 0; i--) {
                    const p = particles[i];
                    p.x += p.vx * delta;
                    p.y += p.vy * delta;
                    p.life -= p.decay * delta;
                    p.alpha = p.life;
                    p.scale.set(p.life * (p.texture === burstTex ? 1.5 : 1.0));
                    if (p.life <= 0) {
                        app.stage.removeChild(p);
                        particles.splice(i, 1);
                    }
                }
            });
        }

        // --- Q3: PLASMA TONGUES (COMMIT) ---
        async function initQ3() {
            const container = document.getElementById('q3');
            const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
            container.appendChild(app.view);

            const fireTex = createGlowTexture(app.renderer, 128, 0xFF6600);
            const coreTex = createGlowTexture(app.renderer, 64, 0xFFFFFF);

            const layers = [];
            for (let i = 0; i < 8; i++) {
                const s = new PIXI.Sprite(i < 6 ? fireTex : coreTex);
                s.anchor.set(0.5, 0.8);
                s.blendMode = PIXI.BLEND_MODES.ADD;
                app.stage.addChild(s);
                layers.push(s);
            }

            let time = 0;
            app.ticker.add((delta) => {
                time += 0.1 * delta;
                layers.forEach((s, i) => {
                    const phase = time + i * 0.5;
                    s.x = app.screen.width / 2 + Math.sin(phase * 0.7) * (i * 5);
                    s.y = app.screen.height / 2 + 50;
                    s.scale.x = 0.5 + Math.sin(phase) * 0.2;
                    s.scale.y = 2.0 + Math.cos(phase * 1.5) * 0.5;
                    s.alpha = (1.0 - (i / 10)) * 0.6;
                });
            });
        }

        // --- Q4: SOLAR CORONA (READY) ---
        async function initQ4() {
            const container = document.getElementById('q4');
            const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
            container.appendChild(app.view);

            const sunTex = createGlowTexture(app.renderer, 128, 0xFF8800);
            const layers = [];
            for (let i = 0; i < 4; i++) {
                const s = new PIXI.Sprite(sunTex);
                s.anchor.set(0.5);
                s.blendMode = PIXI.BLEND_MODES.ADD;
                app.stage.addChild(s);
                layers.push(s);
            }

            let time = 0;
            app.ticker.add((delta) => {
                time += 0.02 * delta;
                layers.forEach((s, i) => {
                    s.position.set(app.screen.width / 2, app.screen.height / 2);
                    s.rotation = time * (1.0 + i * 0.2) * (i % 2 === 0 ? 1 : -1);
                    s.scale.set(2.0 + Math.sin(time + i) * 0.5);
                    s.alpha = 0.3 + Math.sin(time * 2) * 0.1;
                    s.skew.set(Math.sin(time) * 0.1, Math.cos(time) * 0.1);
                });
            });
        }

        initQ1(); initQ2(); initQ3(); initQ4();
    </script>
</body>

</html>



async function initQ3() {
const container = document.getElementById('q3');
const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
container.appendChild(app.view);

// Create a Noise Texture
const noiseSize = 256;
const canvas = document.createElement('canvas');
canvas.width = canvas.height = noiseSize;
const ctx = canvas.getContext('2d');
const noiseTex = PIXI.Texture.from(canvas);

function updateNoise() {
const img = ctx.createImageData(noiseSize, noiseSize);
for (let i = 0; i < img.data.length; i +=4) { const v=Math.random() * 255; img.data[i]=v; img.data[i+1]=v;
    img.data[i+2]=v; img.data[i+3]=255; } ctx.putImageData(img, 0, 0); noiseTex.update(); } const sprite=new
    PIXI.Sprite(PIXI.Texture.WHITE); sprite.width=200; sprite.height=300; sprite.anchor.set(0.5, 0.8);
    sprite.position.set(app.screen.width/2, app.screen.height/2 + 100); sprite.tint=0xFF8C00;
    app.stage.addChild(sprite); const filter=new PIXI.DisplacementFilter(new PIXI.Sprite(noiseTex));
    filter.scale.set(50); sprite.filters=[filter]; app.ticker.add((delta)=> {
    updateNoise();
    sprite.position.set(app.screen.width/2, app.screen.height/2 + 100);
    });
    }

    // --- EFFECT D: MESH-DEFORM ---
    async function initQ4() {
    const container = document.getElementById('q4');
    const app = new PIXI.Application({ resizeTo: container, backgroundAlpha: 0 });
    container.appendChild(app.view);

    const plane = new PIXI.SimplePlane(PIXI.Texture.WHITE, 10, 10);
    plane.width = 150; plane.height = 250;
    plane.position.set(app.screen.width/2 - 75, app.screen.height/2 - 100);
    plane.tint = 0xFFD700;
    app.stage.addChild(plane);

    let time = 0;
    app.ticker.add((delta) => {
    time += 0.1 * delta;
    const buffer = plane.geometry.getBuffer('aVertexPosition');
    for (let i = 0; i < buffer.data.length; i +=2) { const x=buffer.data[i]; const y=buffer.data[i+1]; // Wave based on
        height const wave=Math.sin(y * 0.05 + time) * (250 - y) * 0.1; buffer.data[i]=(i % 22 < 11 ? -75 : 75) + wave; }
        buffer.update(); }); } initQ1(); initQ2(); initQ3(); initQ4(); </script>
        </body>

        </html>