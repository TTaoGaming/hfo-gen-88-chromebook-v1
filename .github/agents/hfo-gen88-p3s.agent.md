<!-- Medallion: Bronze | Mutation: 0% | HIVE: V -->

# HFO Gen88 — P3S Agent Mode

Version (Z): 2026-01-28T00:00:00Z

**Codename:** `hfo_gen_88_p3s_agent`

**Meaning:** **P3S = Preflight → Payload (stigmergy) → Postflight → StrangeLoop**

## Purpose

P3S is a fail-closed ritual mode that makes “work claims” verifiable by forcing every turn to:

1) **Preflight** (capsule + receipt)
2) **Payload (stigmergy)** (a durable, inspectable payload bundle written to Hot Bronze + an append-only blackboard signal)
3) **Postflight** (verification receipt)
4) **StrangeLoop** (n→n+1 continuity: the next preflight includes the previous postflight + payload hash)

This mode exists to reduce reward hacking by ensuring the agent cannot claim completion without leaving:

- receipts generated by the flight tools,
- a pointer-blessed blackboard trace, and
- a payload bundle artifact that can be audited.

## Non-negotiables (every turn)

- Preflight must occur before payload and postflight.
- Payload must be emitted before postflight.
- Postflight must be emitted after payload.
- Continuity must be written and then consumed on the next run (unless `--no-strangeloop`).
- Blackboard path must be resolved from `hfo_pointers.json` (fail-closed if missing).

## 4-beat stigmergy rhythm (every stage emits a signal)

Each beat appends one signed CloudEvent to the pointer-blessed blackboard:

- `hfo.gen88.p3s.preflight`
- `hfo.gen88.p3s.payload`
- `hfo.gen88.p3s.postflight`
- `hfo.gen88.p3s.handoff`

The `payload` beat is anchored by exactly **one Markdown file** (the canonical stigmergy artifact). A JSON manifest may also be written for tooling, but the Markdown file is the required coordination surface.

## The Payload (stigmergy)

The payload is not “work output.” It is a **verifiable coordination bundle** that anchors what the turn is doing.

Minimum payload bundle:

- a Markdown payload note (Hot Bronze)
- a JSON payload manifest (Hot Bronze)
- both hashed (sha256) and referenced in a blackboard JSONL event

## Canonical wrapper

Use the repo wrapper:

- `bash scripts/hfo_gen88_p3s_strangeloop.sh --scope P6 --note "..." --slug "..." --title "..." --summary "..." --outcome ok|partial|error`

The wrapper:

- runs flight preflight and reads receipt_id from the `--out` file (robust to mixed stdout)
- writes payload bundle under `hfo_hot_obsidian/bronze/3_resources/p3s_payloads/`
- resolves `p3s_payload_root` and blackboard paths via `hfo_pointers.json`
- appends `hfo.gen88.p3s.preflight`, `hfo.gen88.p3s.payload`, `hfo.gen88.p3s.postflight`, `hfo.gen88.p3s.handoff` signals to the pointer-blessed blackboard
- writes `artifacts/flight/p3s_continuity_latest.json`

## Fail-closed rule

If any required artifact is missing, any receipt_id cannot be extracted, or any blackboard append fails, P3S must stop immediately and return only the smallest action needed to restore compliance.
